<!DOCTYPE html>
<html lang="id" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manajemen Proses</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #0f172a;
            --panel-bg-color: rgba(30, 41, 59, 0.5);
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --border-color: rgba(255, 255, 255, 0.1);
            --highlight-bg: rgba(79, 70, 229, 0.2);
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            overflow: hidden;
        }
        .glass-panel {
            background: var(--panel-bg-color);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--border-color);
        }
        .main-bg {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: radial-gradient(circle at 20% 20%, rgba(79, 70, 229, 0.2) 0%, transparent 30%),
                              radial-gradient(circle at 80% 70%, rgba(219, 39, 119, 0.15) 0%, transparent 30%);
            z-index: -1;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        .stagger-in > * { opacity: 0; animation: fadeIn 0.5s ease-out forwards; }
    </style>
</head>
<body>
    <div class="main-bg"></div>
    <div class="flex h-screen p-4 gap-4 relative">
        <!-- Sidebar / Navigasi -->
        <aside class="w-1/3 lg:w-1/4 glass-panel rounded-2xl flex flex-col h-full">
            <div class="p-6">
                <h2 class="text-xl font-bold">Konsep Sistem Operasi</h2>
                <p class="text-sm text-slate-400 mt-1">Pilih atau cari topik di bawah.</p>
            </div>
            <div class="px-6 pb-4">
                <input type="text" id="search-bar" placeholder="Cari topik..." class="w-full bg-slate-800 text-slate-200 placeholder-slate-400 border border-slate-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all">
            </div>
            <nav id="topic-menu" class="flex-1 p-4 pt-0 space-y-1 overflow-y-auto">
                <!-- Menu will be generated by JavaScript -->
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 h-full overflow-y-auto">
            <div class="flex flex-col h-full">
                <header class="mb-4 p-6 glass-panel rounded-2xl">
                    <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight">Manajemen Proses</h1>
                    <p class="text-lg text-slate-400 mt-2">Disusun oleh: Muh Kholaf Asmaul Ikhsan</p>
                </header>
                <div id="topic-content" class="flex-1">
                    <!-- Content will be generated by JavaScript -->
                </div>
            </div>
        </main>
    </div>

    <script>
        const topics = [
            {
                title: 'Batch System', short_desc: 'Eksekusi pekerjaan secara berkelompok.',
                icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line></svg>`,
                definition: 'Sistem Batch (Batch System) adalah salah satu jenis sistem operasi paling awal. Konsep utamanya adalah mengumpulkan berbagai pekerjaan (jobs) dari pengguna yang serupa ke dalam satu kelompok atau "batch". Sistem kemudian akan mengeksekusi batch ini secara berurutan tanpa memerlukan intervensi atau interaksi dari pengguna sama sekali. Fitur ini membuatnya sangat efisien untuk tugas-tugas besar dan repetitif yang tidak memerlukan input real-time.',
                example: 'Contoh klasiknya adalah sistem penggajian di perusahaan besar. Sepanjang bulan, data absensi dan jam kerja karyawan dikumpulkan. Di akhir bulan, semua data ini diproses sekaligus dalam satu batch oleh program penggajian untuk menghitung gaji, pajak, dan tunjangan, lalu mencetak slip gaji untuk ribuan karyawan. Proses ini berjalan otomatis tanpa perlu diinput satu per satu.',
                key_points: ['Tanpa interaksi pengguna', 'Diproses secara berurutan', 'Efisiensi untuk tugas repetitif'],
                quiz: [
                    {
                        question: "Manakah ciri utama yang mendefinisikan sebuah Batch System?",
                        options: ["Setiap pekerjaan membutuhkan input pengguna", "Pekerjaan dieksekusi tanpa intervensi pengguna", "Hanya bisa menjalankan satu pekerjaan dalam sehari", "Didesain untuk game online"],
                        answer: "Pekerjaan dieksekusi tanpa intervensi pengguna"
                    },
                    {
                        question: "Mengapa sistem penggajian adalah contoh yang baik untuk Batch System?",
                        options: ["Karena membutuhkan perhitungan cepat", "Karena prosesnya sama dan berulang untuk banyak data", "Karena gaji harus dibayar secara real-time", "Karena membutuhkan grafis yang tinggi"],
                        answer: "Karena prosesnya sama dan berulang untuk banyak data"
                    },
                    {
                        question: "Apa keuntungan utama menggunakan Batch System?",
                        options: ["Interaksi real-time", "Efisiensi untuk tugas repetitif", "Kecepatan untuk gaming", "Keamanan tinggi"],
                        answer: "Efisiensi untuk tugas repetitif"
                    },
                    {
                        question: "Dalam Batch System, bagaimana pekerjaan dieksekusi?",
                        options: ["Secara acak", "Secara paralel", "Secara berurutan", "Sesuai prioritas pengguna"],
                        answer: "Secara berurutan"
                    },
                    {
                        question: "Manakah yang BUKAN merupakan karakteristik dari Batch System?",
                        options: ["Tidak memerlukan intervensi pengguna", "Mengumpulkan pekerjaan dalam batch", "Memerlukan input real-time", "Efisien untuk tugas besar"],
                        answer: "Memerlukan input real-time"
                    }
                ]
            },
            {
                title: 'Critical Section', short_desc: 'Segmen kode akses sumber daya bersama.',
                icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><path d="m9 12 2 2 4-4"></path></svg>`,
                definition: 'Critical Section adalah bagian dari kode program di mana ia mengakses sumber daya bersama (shared resources), seperti variabel global, file, atau koneksi jaringan. Masalah muncul ketika beberapa proses atau thread mencoba mengakses critical section yang sama secara bersamaan, yang dapat menyebabkan kondisi balapan (race condition) dan merusak data. Oleh karena itu, sistem operasi menyediakan mekanisme sinkronisasi (seperti mutex atau semaphore) untuk memastikan hanya satu proses/thread yang dapat berada di dalam critical section pada satu waktu.',
                example: 'Bayangkan sistem reservasi tiket bioskop online. Proses memeriksa ketersediaan kursi dan mengurangi jumlah kursi yang tersedia adalah sebuah critical section. Jika dua orang memesan kursi terakhir pada saat yang sama, tanpa proteksi, sistem bisa saja menjual kursi yang sama kepada keduanya. Mekanisme sinkronisasi memastikan bahwa setelah satu orang masuk ke proses pemesanan, orang lain harus menunggu hingga proses pertama selesai.',
                key_points: ['Akses sumber daya bersama', 'Mencegah race condition', 'Membutuhkan mekanisme sinkronisasi'],
                 quiz: [
                    {
                        question: "Apa masalah utama yang dicegah dengan melindungi Critical Section?",
                        options: ["Program berjalan lambat", "Penggunaan memori berlebih", "Race Condition (kondisi balapan)", "Kerusakan hardware"],
                        answer: "Race Condition (kondisi balapan)"
                    },
                    {
                        question: "Manakah di bawah ini yang merupakan contoh mekanisme sinkronisasi untuk Critical Section?",
                        options: ["CPU Cache", "RAM", "Mutex atau Semaphore", "Hard Disk"],
                        answer: "Mutex atau Semaphore"
                    },
                    {
                        question: "Apa yang diakses oleh sebuah proses di dalam Critical Section?",
                        options: ["Sumber daya pribadi", "Sumber daya bersama", "Hanya memori", "Hanya CPU"],
                        answer: "Sumber daya bersama"
                    },
                    {
                        question: "Berapa banyak thread yang diizinkan masuk ke Critical Section pada satu waktu?",
                        options: ["Sebanyak mungkin", "Dua", "Hanya satu", "Tergantung RAM"],
                        answer: "Hanya satu"
                    },
                    {
                        question: "Dalam contoh reservasi tiket, apa yang terjadi jika Critical Section tidak dilindungi?",
                        options: ["Website menjadi cepat", "Sistem bisa menjual kursi yang sama dua kali", "Harga tiket menjadi murah", "Server akan mati"],
                        answer: "Sistem bisa menjual kursi yang sama dua kali"
                    }
                ]
            },
            {
                title: 'Process Control Block', short_desc: 'Struktur data info lengkap proses.',
                icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><line x1="10" y1="9" x2="8" y2="9"></line></svg>`,
                definition: 'Process Control Block (PCB) adalah sebuah struktur data vital di dalam kernel sistem operasi yang berisi semua informasi terkait sebuah proses. Setiap kali sebuah proses dibuat, sistem operasi juga membuat PCB yang sesuai untuknya. PCB ini berfungsi sebagai "kartu identitas" proses dan menyimpan seluruh konteks (context) dari proses tersebut, yang memungkinkan sistem operasi untuk melakukan context switch, yaitu beralih eksekusi dari satu proses ke proses lain.',
                example: 'Informasi yang tersimpan di dalam PCB sangat beragam, mencakup: ID Proses, status proses (misal: running, waiting, ready), Program Counter (alamat instruksi selanjutnya), nilai register CPU, informasi manajemen memori (misal: base/limit registers), dan daftar file yang sedang dibuka. Saat Anda beralih dari browser ke pemutar musik, OS menyimpan konteks browser di PCB-nya dan memuat konteks pemutar musik dari PCB-nya.',
                key_points: ["'KTP' sebuah proses", 'Disimpan saat context switch', 'Mengandung status & konteks proses'],
                quiz: [
                    {
                        question: "Kapan sebuah PCB dibuat oleh sistem operasi?",
                        options: ["Saat komputer dimatikan", "Setiap satu jam sekali", "Saat sebuah proses baru dibuat", "Saat pengguna login"],
                        answer: "Saat sebuah proses baru dibuat"
                    },
                    {
                        question: "Informasi apa yang disimpan PCB untuk melanjutkan eksekusi proses setelah context switch?",
                        options: ["Nama pengguna", "Alamat IP", "Program Counter dan register CPU", "Jenis monitor"],
                        answer: "Program Counter dan register CPU"
                    },
                    {
                        question: "Apa fungsi utama dari PCB?",
                        options: ["Menyimpan file pengguna", "Sebagai 'kartu identitas' proses", "Mengatur koneksi internet", "Mendinginkan CPU"],
                        answer: "Sebagai 'kartu identitas' proses"
                    },
                    {
                        question: "Istilah untuk beralih eksekusi dari satu proses ke proses lain yang dimungkinkan oleh PCB adalah...",
                        options: ["Multitasking", "Context Switch", "Booting", "Shutdown"],
                        answer: "Context Switch"
                    },
                    {
                        question: "Manakah dari berikut ini yang BUKAN informasi yang disimpan di PCB?",
                        options: ["ID Proses", "Status Proses", "Riwayat browsing pengguna", "Informasi manajemen memori"],
                        answer: "Riwayat browsing pengguna"
                    }
                ]
            },
            {
                title: 'Distributed Processing', short_desc: 'Tugas diproses oleh banyak komputer.',
                icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>`,
                definition: 'Distributed Processing (Pemrosesan Terdistribusi) adalah paradigma di mana komponen-komponen sebuah sistem perangkat lunak dibagi di antara beberapa komputer (atau node) yang terhubung dalam satu jaringan. Alih-alih satu komputer super kuat, sistem ini menggunakan kekuatan gabungan dari banyak komputer untuk menyelesaikan tugas-tugas komputasi yang besar. Kunci utamanya adalah komunikasi dan koordinasi antar node untuk bekerja sama seolah-olah mereka adalah satu sistem tunggal.',
                example: 'Mesin pencari seperti Google adalah contoh skala besar. Saat Anda mengetik kueri, permintaan itu tidak dikirim ke satu server, melainkan dipecah dan didistribusikan ke ribuan server di seluruh dunia. Setiap server mencari sebagian kecil dari indeks web, lalu hasilnya dikumpulkan, diperingkat, dan disajikan kepada Anda dalam hitungan milidetik. Ini memberikan kecepatan dan ketahanan (fault tolerance) yang luar biasa.',
                key_points: ['Banyak komputer, satu tugas', 'Meningkatkan kecepatan & reliabilitas', 'Komunikasi via jaringan'],
                 quiz: [
                    {
                        question: "Apa tujuan utama dari Distributed Processing?",
                        options: ["Mengurangi biaya hardware", "Menggunakan kekuatan gabungan banyak komputer", "Membuat program lebih sederhana", "Bekerja tanpa jaringan internet"],
                        answer: "Menggunakan kekuatan gabungan banyak komputer"
                    },
                    {
                        question: "Selain kecepatan, apa keuntungan lain dari sistem terdistribusi seperti Google Search?",
                        options: ["Hanya butuh satu programmer", "Tidak perlu update", "Ketahanan (fault tolerance)", "Menggunakan lebih sedikit listrik"],
                        answer: "Ketahanan (fault tolerance)"
                    },
                    {
                        question: "Bagaimana sebuah tugas besar diselesaikan dalam Distributed Processing?",
                        options: ["Dikerjakan satu komputer paling kuat", "Dibagi ke beberapa komputer dalam jaringan", "Dikerjakan secara manual", "Diantrikan dan dikerjakan satu per satu"],
                        answer: "Dibagi ke beberapa komputer dalam jaringan"
                    },
                    {
                        question: "Apa kunci utama agar Distributed Processing berhasil?",
                        options: ["Kecepatan internet yang lambat", "Komunikasi dan koordinasi antar node", "Semua komputer harus identik", "Pengguna harus ahli"],
                        answer: "Komunikasi dan koordinasi antar node"
                    },
                    {
                        question: "Dalam contoh Google Search, apa yang terjadi pada permintaan (kueri) Anda?",
                        options: ["Dikirim ke satu server pusat", "Diabaikan jika server sibuk", "Dipecah dan didistribusikan ke ribuan server", "Diterjemahkan ke bahasa lain"],
                        answer: "Dipecah dan didistribusikan ke ribuan server"
                    }
                ]
            },
            {
                title: 'Handheld', short_desc: 'Perangkat komputasi portabel.',
                icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line></svg>`,
                definition: 'Handheld, atau perangkat genggam, adalah kategori perangkat komputasi yang dirancang agar portabel dan dapat dioperasikan saat dipegang. Perangkat ini memiliki sistem operasi khusus (sistem operasi mobile seperti Android atau iOS) yang dioptimalkan untuk keterbatasan perangkat kerasnya, seperti ukuran layar yang kecil, daya baterai yang terbatas, dan metode input utama melalui layar sentuh.',
                example: 'Contoh paling umum saat ini adalah smartphone dan tablet. Namun, kategori ini juga mencakup perangkat yang lebih spesifik seperti konsol game portabel (Nintendo Switch Lite), pemindai barcode di gudang, atau perangkat Point-of-Sale (POS) mobile yang digunakan di kafe dan restoran. Semuanya berbagi karakteristik desain yang ringkas dan mobilitas.',
                key_points: ['Portabel dan ringan', 'Sistem operasi mobile', 'Input utama via layar sentuh'],
                quiz: [
                    {
                        question: "Apa optimalisasi utama pada sistem operasi perangkat handheld?",
                        options: ["Untuk server database besar", "Untuk daya baterai terbatas dan layar kecil", "Untuk gaming dengan grafis ultra", "Untuk keyboard dan mouse"],
                        answer: "Untuk daya baterai terbatas dan layar kecil"
                    },
                    {
                        question: "Manakah dari berikut ini yang juga termasuk kategori perangkat handheld selain smartphone?",
                        options: ["Komputer desktop", "Server rak", "Konsol game portabel", "Smart TV"],
                        answer: "Konsol game portabel"
                    },
                    {
                        question: "Apa metode input utama untuk sebagian besar perangkat handheld modern?",
                        options: ["Keyboard fisik", "Mouse", "Layar sentuh", "Perintah suara"],
                        answer: "Layar sentuh"
                    },
                    {
                        question: "Sistem operasi seperti Android dan iOS dirancang khusus untuk...",
                        options: ["Perangkat server", "Superkomputer", "Perangkat handheld", "Komputer desktop"],
                        answer: "Perangkat handheld"
                    },
                    {
                        question: "Manakah yang BUKAN karakteristik perangkat handheld?",
                        options: ["Portabel dan ringkas", "Membutuhkan sumber daya listrik konstan", "Memiliki daya baterai terbatas", "Dioptimalkan untuk mobilitas"],
                        answer: "Membutuhkan sumber daya listrik konstan"
                    }
                ]
            },
            {
                title: 'Thread', short_desc: 'Unit eksekusi terkecil dalam proses.',
                icon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>`,
                definition: 'Thread adalah unit dasar dari pemanfaatan CPU. Ia terdiri dari ID thread, program counter, set register, dan stack. Dalam satu proses, bisa terdapat beberapa thread yang berjalan secara bersamaan (concurrent). Thread dalam proses yang sama berbagi bagian kode, bagian data, dan sumber daya OS lainnya, seperti file yang dibuka. Karena berbagi memori, pembuatan dan perpindahan antar thread (context switch) jauh lebih cepat dibandingkan dengan proses.',
                example: 'Dalam aplikasi pengolah kata modern, satu thread mungkin didedikasikan untuk merender antarmuka pengguna (menanggapi ketikan Anda). Thread kedua bisa berjalan di latar belakang untuk melakukan pemeriksaan ejaan secara otomatis. Thread ketiga mungkin secara periodik menyimpan dokumen Anda (autosave). Ini membuat aplikasi terasa sangat responsif karena tugas yang memakan waktu tidak memblokir antarmuka utama.',
                key_points: ["'Proses ringan'", 'Berbagi memori dalam satu proses', 'Membuat aplikasi lebih responsif'],
                quiz: [
                    {
                        question: "Apa yang membuat perpindahan antar thread lebih cepat daripada antar proses?",
                        options: ["Thread memiliki prioritas lebih tinggi", "Thread berbagi memori dan sumber daya", "Thread tidak pernah error", "Thread menggunakan lebih banyak CPU"],
                        answer: "Thread berbagi memori dan sumber daya"
                    },
                    {
                        question: "Pada contoh pengolah kata, apa manfaat dari pemeriksaan ejaan yang berjalan di thread terpisah?",
                        options: ["Agar dokumen lebih cepat disimpan", "Agar antarmuka pengguna tidak macet (freeze)", "Agar ejaan selalu 100% benar", "Agar file dokumen lebih kecil"],
                        answer: "Agar antarmuka pengguna tidak macet (freeze)"
                    },
                    {
                        question: "Apa sebutan untuk unit dasar dari pemanfaatan CPU yang terdiri dari ID, program counter, register, dan stack?",
                        options: ["Proses", "Kernel", "File", "Thread"],
                        answer: "Thread"
                    },
                    {
                        question: "Apa yang dibagikan oleh thread-thread dalam proses yang sama?",
                        options: ["Hanya stack", "Tidak ada yang dibagikan", "Bagian kode, data, dan sumber daya OS", "Hanya ID thread"],
                        answer: "Bagian kode, data, dan sumber daya OS"
                    },
                    {
                        question: "Dalam aplikasi pengolah kata, thread yang menangani ketikan pengguna adalah thread untuk...",
                        options: ["Menyimpan dokumen (autosave)", "Antarmuka pengguna (UI)", "Pemeriksaan ejaan", "Mencetak dokumen"],
                        answer: "Antarmuka pengguna (UI)"
                    }
                ]
            }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            // ... (rest of the script is in the next block)
        });
    </script>
    <script>
        // Separate script block for clarity
        document.addEventListener('DOMContentLoaded', () => {
            const menuContainer = document.getElementById('topic-menu');
            const contentContainer = document.getElementById('topic-content');
            const searchBar = document.getElementById('search-bar');
            let menuItems = [];

            // --- DISPLAY LOGIC ---
            function displayTopic(index) {
                const topic = topics[index];
                
                const keyPointsHtml = topic.key_points.map((point, i) => 
                    `<li class="flex items-start" style="animation-delay: ${i * 100}ms;">
                        <svg class="w-5 h-5 text-indigo-400 mr-2 mt-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <span>${point}</span>
                    </li>`
                ).join('');

                const contentHtml = `
                    <div class="glass-panel p-6 md:p-8 rounded-2xl h-full fade-in">
                        <div class="flex items-center mb-6">
                            <div class="text-indigo-400 bg-[var(--highlight-bg)] p-3 rounded-xl mr-4">
                                ${topic.icon}
                            </div>
                            <h2 class="text-2xl font-bold">${topic.title}</h2>
                        </div>
                        <div class="space-y-6 text-slate-300 leading-relaxed">
                             <div>
                                <h3 class="font-semibold text-lg text-primary mb-2">Definisi & Contoh</h3>
                                <p>${topic.definition}<br><br><strong>Contoh:</strong> ${topic.example}</p>
                            </div>
                             <div>
                                <h3 class="font-semibold text-lg text-primary mb-3">Poin Kunci</h3>
                                <ul class="space-y-2 stagger-in">${keyPointsHtml}</ul>
                            </div>
                            <div class="pt-4 border-t border-[var(--border-color)]">
                                 <div id="quiz-container">
                                    <button id="quiz-start-btn" class="w-full text-center font-semibold text-indigo-400 hover:underline p-2 rounded-lg bg-indigo-500/10 hover:bg-indigo-500/20 transition-colors">Mulai Kuis: Uji Pemahaman &rarr;</button>
                                 </div>
                            </div>
                        </div>
                    </div>`;
                contentContainer.innerHTML = contentHtml;
                
                document.getElementById('quiz-start-btn').addEventListener('click', () => runQuiz(topic));

                menuItems.forEach((item, i) => {
                    const isActive = topics[index] && item.dataset.title === topics[index].title;
                    item.classList.toggle('bg-indigo-500/20', isActive);
                });
            }

            function runQuiz(topic) {
                let lives = 3;
                let currentQuestionIndex = 0;
                const quizContainer = document.getElementById('quiz-container');

                function renderQuestion() {
                    const questionData = topic.quiz[currentQuestionIndex];
                    const hearts = Array(3).fill(0).map((_, i) => 
                        `<svg class="w-6 h-6 ${i < lives ? 'text-red-500' : 'text-slate-500'}" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"></path></svg>`
                    ).join('');

                    const optionsHtml = questionData.options.map(opt => 
                        `<button class="quiz-option w-full text-left p-3 border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors">${opt}</button>`
                    ).join('');

                    quizContainer.innerHTML = `
                        <div class="fade-in">
                            <div class="flex justify-between items-center mb-4">
                                <p class="font-semibold">Pertanyaan ${currentQuestionIndex + 1} dari ${topic.quiz.length}</p>
                                <div class="flex space-x-1">${hearts}</div>
                            </div>
                            <p class="mb-4">${questionData.question}</p>
                            <div class="space-y-2 quiz-options">${optionsHtml}</div>
                            <div id="quiz-feedback" class="text-sm font-medium mt-3"></div>
                        </div>`;

                    document.querySelectorAll('.quiz-option').forEach(optionBtn => {
                        optionBtn.addEventListener('click', () => handleAnswer(optionBtn, questionData.answer));
                    });
                }

                function handleAnswer(selectedButton, correctAnswer) {
                    document.querySelectorAll('.quiz-option').forEach(btn => btn.disabled = true);
                    const feedbackEl = document.getElementById('quiz-feedback');
                    
                    if (selectedButton.textContent === correctAnswer) {
                        selectedButton.classList.add('bg-green-500/20', 'border-green-500');
                        feedbackEl.innerHTML = `<span class="text-green-400">Benar!</span>`;
                    } else {
                        selectedButton.classList.add('bg-red-500/20', 'border-red-500');
                        feedbackEl.innerHTML = `<span class="text-red-400">Salah!</span>`;
                        lives--;
                    }
                    
                    setTimeout(() => {
                        if (lives === 0) {
                            showEndScreen(false);
                        } else if (currentQuestionIndex < topic.quiz.length - 1) {
                            currentQuestionIndex++;
                            renderQuestion();
                        } else {
                            showEndScreen(true);
                        }
                    }, 1500);
                }

                function showEndScreen(isWin) {
                     quizContainer.innerHTML = `
                        <div class="text-center fade-in p-4">
                            <h3 class="text-xl font-bold mb-2">${isWin ? '✨ Kuis Selesai! ✨' : '💔 Game Over 💔'}</h3>
                            <p class="mb-4">${isWin ? 'Kerja bagus! Kamu berhasil menjawab semua pertanyaan.' : 'Kamu kehabisan nyawa. Ayo coba lagi!'}</p>
                            <button id="quiz-retry-btn" class="font-semibold text-indigo-400 hover:underline">Coba Lagi</button>
                        </div>
                    `;
                    document.getElementById('quiz-retry-btn').addEventListener('click', () => runQuiz(topic));
                }

                renderQuestion();
            }
            
            function buildMenu() {
                menuContainer.innerHTML = '';
                menuItems = [];
                const searchTerm = searchBar.value.toLowerCase();

                topics.forEach((topic, index) => {
                    if (topic.title.toLowerCase().includes(searchTerm) || topic.short_desc.toLowerCase().includes(searchTerm)) {
                        const menuItem = document.createElement('a');
                        menuItem.href = '#';
                        menuItem.dataset.title = topic.title;
                        menuItem.className = 'menu-item flex flex-col p-3 rounded-lg transition-colors duration-200';
                        menuItem.innerHTML = `<span class="font-semibold text-base">${topic.title}</span><span class="text-sm text-slate-400">${topic.short_desc}</span>`;
                        menuItem.addEventListener('click', (e) => {
                            e.preventDefault();
                            displayTopic(index);
                        });
                        menuContainer.appendChild(menuItem);
                        menuItems.push(menuItem);
                    }
                });
                
                if (menuItems.length > 0) {
                   const firstVisibleTopicTitle = menuItems[0].dataset.title;
                   const originalIndex = topics.findIndex(t => t.title === firstVisibleTopicTitle);
                   displayTopic(originalIndex);
                } else {
                    contentContainer.innerHTML = `<div class="glass-panel p-8 rounded-2xl h-full flex items-center justify-center fade-in"><p class="text-slate-400">Tidak ada topik yang cocok.</p></div>`;
                }
            }
            
            searchBar.addEventListener('input', buildMenu);
            buildMenu();
        });
    </script>
</body>
</html>

